/* Shield UI 1.7.44 Trial Version | Copyright 2013-2022 Shield UI Ltd. | http://www.shieldui.com/eula | Expires on Tue, 13 Sep 2022 03:00:24 GMT */
!function(_,e,n){var g=e.ui.Widget,m=(e.Class,document),c=_.proxy,a=_.each,f=(_.extend,_.map),o=Math.min,N=Math.max,M=(e.guid,e.iid),j=e.error,z=e.format,p=e.is.defined,h=(e.is.boolean,e.is.integer,e.is.func,e.is.array,e.is.object,e.is.string,e.support.browser,"disabled"),v="multiple",b="change",F="dragover",y="dragleave",I="drop",r="select",L="remove",D="error",P="progress",S="load",l="upload",d="complete",x="POST",C="pending",T="uploading",w="complete",U="removing",E="error",q={pending:"&#10005;",uploading:"&#10754;",complete:"&#10005;",removing:"&#10754;",error:"&#10005;"},t="sui-upload",A=t+"-target-input",i=t+"-status",u=t+"-file",B=t+"-xhr",R=t+"-form",k=t+"-iframe",t={cls:n,enabled:!0,async:{enabled:!1,autoUpload:!1,batch:!1,save:{url:n,field:n},remove:{url:n,field:"fileNames",method:x}},multiple:!0,files:{enabled:!0,initial:n,template:"{name} ({size} bytes)"},messages:{drop:"Drop files here to upload",select:"Select files ...",upload:"Upload files"},events:{}},s=g.extend({init:function(){g.fn.init.apply(this,arguments);var e,t,i,a,s,o=this,n=o.options,l=n.dieOnError,r=n.cls,d=n.messages,u=n.files,p=u.enabled,u=u.initial,f=n.async.enabled;o._xhr2support=e=!!(new XMLHttpRequest).upload,o._original=i=_(o.element),"input"!=i.prop("tagName").toLowerCase()||"file"!=i.attr("type").toLowerCase()?j("shieldUpload: Must be initialized from an input with type file.",l):(l=o._eventNS=".shieldUpload"+o.getInstanceId(),i.wrap("<form>").closest("form").get(0).reset(),i.unwrap(),i.removeAttr(h),n.multiple?i.attr(v,v):i.removeAttr(v),o.element=t=i.wrap("<div/>").parent(),t.addClass("sui-upload"+(r?" "+r:"")),o._selectButtonDiv=i.wrap("<div/>").parent().append('<span class="sui-upload-button-text">'+d.select+"</span>").addClass("sui-upload-button"),o._dropFilesDiv=a=o._selectButtonDiv.wrap('<div class="sui-upload-dropfiles"/>').parent(),o._dropText=s=_('<div class="sui-upload-drop">'+d.drop+"</div>").appendTo(a).hide(),p&&(o._fileList=_('<ul class="sui-upload-files"/>').appendTo(t).hide()),o._uploadButtonDiv=_('<button class="sui-upload-button sui-upload-button-upload" type="button">'+d.upload+"</button>").appendTo(t).click(c(o._uploadClicked,o)).hide(),i.on(b+l,c(o._fileSelected,o)),f&&e&&(i.on(I+l,c(o._fileChanged,o)),_(m).on(F+l,function(e){e.stopPropagation(),e.preventDefault(),s.show()}).on(y+l,function(e){e.stopPropagation(),e.preventDefault(),s.hide()}).on(I+l,function(e){e.stopPropagation(),e.preventDefault(),s.hide()}),a.on(F,function(){a.addClass("sui-upload-dropfiles-hover")}).on(y,function(){a.removeClass("sui-upload-dropfiles-hover")}).on(I,c(o._fileChanged,o))),p&&u&&0<u.length&&o._addFiles(u,w),o.enabled(n.enabled))},refresh:function(e){this.refreshWithElement(this._original,e)},_getFiles:function(e){var t=[],i=_(e.target);return e.originalEvent.dataTransfer&&e.originalEvent.dataTransfer.files?t=e.originalEvent.dataTransfer.files:e.target.files?t=e.target.files:(t=_.makeArray(i.prop("files"))).length?!p(t[0].name)&&t[0].fileName&&a(t,function(e,t){t.name=t.fileName,t.size=t.fileSize}):t=(e=i.prop("value"))?[{name:e.replace(/^.*\\/,"")}]:[],t},_getPendingFileItems:function(){return _(this._fileList).children("li.sui-upload-file-"+C)},_getFileInfoList:function(e){return this._toFileInfoList(_(e).data(u))},_toFileInfoList:function(e){var t,i=[];if(this._isFileList(e))for(t=0;t<e.length;t++)i.push(e[t]);else i.push(e);return i},_isSingleFile:function(e){return e&&e.name},_isFileList:function(e){return e.length&&0<e.length},_fileSelected:function(e){var t,i=this,a=i.options,s=a.async.enabled,o=i._xhr2support,n=i._eventNS,l=_(e.target),e=i._getFiles(e);i.trigger(r,{files:i._toFileInfoList(e)}).isDefaultPrevented()||(t=_('<input type="file" name="'+l.attr("name")+'"/>').insertAfter(l).on(b+n,c(i._fileSelected,i)),a.multiple&&t.attr(v,v),s&&o&&t.on(I+n,c(i._fileChanged,i)),l.hide(),i._addFiles(e,C,l))},_fileChanged:function(e){var t=this,i=t._getFiles(e);e.stopPropagation(),e.preventDefault(),t._dropText.hide(),t._dropFilesDiv.removeClass("sui-upload-dropfiles-hover"),t.trigger(r,{files:t._toFileInfoList(i)}).isDefaultPrevented()||t._addFiles(i,C)},_addFiles:function(e,t,i){var a,s=this,o=s.options,n=o.async;if(o.files.enabled){if(n.enabled&&!n.batch||!o.multiple)for(a=0;a<e.length;a++)s._renderFile(e[a],t,i);else s._renderFile(e,t,i);s._afterAddRemoveFiles(),n.autoUpload&&s._uploadAllPending()}},_renderFile:function(e,t,i){var a,s=this,o=s.options,n=o.files.template,l=(s._fileList,s._toFileInfoList(e)),r=[],e=_('<li class="sui-upload-file"/>').data(u,e).appendTo(s._fileList);for(i&&e.data(A,i),a=0;a<l.length;a++)r.push(_('<span class="sui-upload-file-text"/>').append(z(n,l[a]))),a<l.length-1&&r.push(_('<span class="sui-upload-file-text-sep">,</span>'));o.async.enabled&&s._xhr2support?r.push(_('<span class="sui-upload-file-progress"/>')):e.addClass("sui-upload-file-no-progress"),r.push(_('<span class="sui-upload-file-action"/>').on("click",c(s._actionClicked,s,e))),e.append(r),s._setStatus(e,t),t===w&&s._setProgress(e,100)},_afterAddRemoveFiles:function(){var e=this.options.async,t=this._fileList,i=this._uploadButtonDiv;0<t.children("li").length?t.show():t.hide(),0<this._getPendingFileItems().length?e.enabled&&!e.autoUpload&&i.show():i.hide()},_actionClicked:function(e,t){var i=this,a=i._getStatus(e);i._enabled&&(a==T?i._abortUpload(e,t):a==U?i._abortRemove(e,t):i._removeItem(e,t))},_removeItem:function(a,s){var o,n=this,e=(n.options,n.options.async),t=e.remove,i=n._getStatus(a),l=n._getFileInfoList(a),r=a.data(A),d=n._eventNS,u={},p=n.trigger(L,{domEvent:s,status:i,files:l});p.isDefaultPrevented()||(o=function(){_(r)[0]===_(n._original)[0]?_(r).hide().attr(h,h):_(r).off(d).remove(),_(a).off(d).remove(),n._afterAddRemoveFiles()},i==C||i==E?o():i==w&&(e.enabled?(n._setStatus(a,U),u[t.field]=f(l,function(e){return e.name}),_.support.cors=!0,_.ajax({method:t.method,url:t.url,traditional:!0,data:u}).done(function(e,t,i){o()}).fail(function(e,t,i){n.trigger(D,{domEvent:s,operation:L,listItem:a,files:l,jqXHR:e,textStatus:t,errorThrown:i,responseText:i});p.isDefaultPrevented()||n._setStatus(a,E)})):o()))},_abortRemove:function(e,t){},_setStatus:function(e,t){_(e).data(i,t).removeClass("sui-upload-file-pending sui-upload-file-uploading sui-upload-file-complete sui-upload-file-removing sui-upload-file-error").addClass("sui-upload-file-"+t).children(".sui-upload-file-action").first().html(q[t]),this._afterAddRemoveFiles()},_getStatus:function(e){return _(e).data(i)},_uploadAllPending:function(){var e,t,i=this,a=(i.options.async,i._getPendingFileItems()),s=(a||[]).length,o=[];if(!(s<1)){for(t=0;t<s;t++)e=_(a[t]).data(u),i._isSingleFile(e)?o.push(e):i._isFileList(e)&&(o=o.concat(e));if(!i.trigger(l,{files:o}).isDefaultPrevented())for(t=0;t<s;t++)i._startUpload(a[t])}},_startUpload:function(e){var t,i,a,s,o,n,l=this,r=l.options.async.save,d=r.field,u=l._getFileInfoList(e);if(p(d)||(d=_(l._original).attr("name")),l._setProgress(e,0),l._xhr2support){for(i=new FormData,a=new XMLHttpRequest,n=0;n<u.length;n++)i.append(d,u[n]);_(e).data(B,a),a.open(x,r.url),a.upload.addEventListener(P,c(l._onUploadProgress,l,e)),a.upload.addEventListener(S,c(l._onUploadComplete,l,e)),a.upload.addEventListener(D,c(l._onUploadError,l,e)),a.onreadystatechange=function(){4==a.readyState&&200!=a.status&&l._onUploadError(e)},a.send(i)}else(t=_(e).data(A))&&(s="shieldUploadIframe"+M(),o=_('<iframe name="'+s+'" id="'+s+'" class="sui-upload-iframe" width="0" height="0" tabindex="-1"/>').appendTo(m.body),_(o).on(S,c(l._onIframeComplete,l,e)),r=_('<form class="sui-upload-form" method="POST" enctype="multipart/form-data" action="'+r.url+'" target="'+s+'" tabindex="-1"/>').appendTo(m.body).append(t),_(e).data(k,o).data(R,r),r.get(0).submit());l._setStatus(e,T)},_abortUpload:function(e,t){var i,a=this;a._xhr2support?((i=_(e).data(B))&&i.abort(),_(e).removeData(B)):a._cleanupIframeForm(e),a._setStatus(e,C),a._setProgress(e,0),a.trigger("abort",{listItem:e,files:a._getFileInfoList(e)})},_cleanupIframeForm:function(e){var t=_(e).data(k),i=_(e).data(R),a=_(e).data(A);t&&_(t).attr("src","about:blank"),i&&(a&&_(a).prependTo(this._selectButtonDiv),_(i).remove(),_(e).removeData(R)),t&&(_(t).remove(),_(e).removeData(k))},_setProgress:function(e,t){e=_(e).children(".sui-upload-file-progress").first();e&&0<e.length&&e.empty().append(_('<span class="sui-upload-file-progress-inner"/>').css("width",t+"%"))},_onUploadProgress:function(e,t){var i=t.lengthComputable?o(100,N(0,t.loaded/t.total*100)):n;p(i)&&this._setProgress(e,i),this.trigger(P,{domEvent:t,percentage:i,listItem:e,files:this._getFileInfoList(e)})},_onUploadComplete:function(e){this._setStatus(e,w),this._setProgress(e,100),_(e).removeData(B),this.trigger(d,{listItem:e,files:this._getFileInfoList(e)})},_onIframeComplete:function(e,t){var i=this,a=_(e).data(k),s=i._getFileInfoList(e),o="";if(a){try{o=_(a).contents().find("body").html()}catch(e){o=e?e.description||e.message:""}o?i.trigger(D,{domEvent:t,operation:l,listItem:e,files:s,status:n,responseText:o}).isDefaultPrevented()||(i._setStatus(e,E),i._setProgress(e,0)):(i._setStatus(e,w),i._setProgress(e,100),i.trigger(d,{listItem:e,files:s})),i._cleanupIframeForm(e)}},_onUploadError:function(e,t){var i,a,s=this,o=s._getStatus(e),n=_(e).data(B);o!==E&&(n&&(n.readyState,i=n.status,a=n.responseText,n.statusText),_(e).removeData(B),s.trigger(D,{domEvent:t,operation:l,listItem:e,files:s._getFileInfoList(e),status:i,responseText:a}).isDefaultPrevented()||(s._setStatus(e,E),s._setProgress(e,0)))},_uploadClicked:function(e){this._enabled&&this._uploadAllPending()},enabled:function(){var e,t=_(this.element),i=[].slice.call(arguments);if(!(0<i.length))return this._enabled;i=!!i[0],e=t.find('input[type="file"]').filter(":visible"),i?(t.removeAttr(h).removeClass("sui-upload-disabled"),_(e).removeAttr(h)):(t.attr(h,h).addClass("sui-upload-disabled"),_(e).attr(h,h)),this._enabled=i},destroy:function(){var e=this,t=_(e.element),i=_(e._original),a=e._eventNS;_(m).off(a),_(t).find('input[type="file"]').off(a),_(t).find('input[type="file"]').not(i).remove(),e._uploadButtonDiv&&(_(e._uploadButtonDiv).remove(),e._uploadButtonDiv=null),e._dropText&&(_(e._dropText).remove(),e._dropText=null),e._fileList&&(_(e._fileList).remove(),e._fileList=null),_(t).find(".sui-upload-button-text").remove(),_(i).unwrap(),_(i).unwrap(),_(i).unwrap(),e._selectButtonDiv=e._dropFilesDiv=null,_(i).removeAttr(h).show(),g.fn.destroy.call(e)}});s.defaults=t,e.ui.plugin("Upload",s)}(jQuery,shield);